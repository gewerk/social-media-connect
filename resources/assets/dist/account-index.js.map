{"version":3,"file":"account-index.js","mappings":"KAGwC,IAA7BA,MAAMC,qBACfD,MAAMC,mBAAqB,IAG7BD,MAAMC,mBAAmBC,aAAeF,MAAMG,iBAAiBC,OAAO,CACpEC,kBAAmB,KACnBC,aAAc,KAEdC,KAAM,SAAUC,EAAaC,EAAYC,GACvCC,KAAKC,GAAG,eAAgBD,KAAKE,aAAaC,KAAKH,OAC/CA,KAAKC,GAAG,aAAcD,KAAKE,aAAaC,KAAKH,OAC7CA,KAAKI,KAAKP,EAAaC,EAAYC,IAGrCM,UAAW,WACTL,KAAKI,QAGPF,aAAc,WAAY,QAEpBF,KAAKN,mBACPM,KAAKN,kBAAkBY,SAGzBN,KAAKN,kBAAoBa,EAAE,kCAE3B,MAAMC,EAAsB,oBAAGR,KAAKS,eAAR,aAAG,EAAcC,KAAK,cAAtB,QAAgC,IACtDC,EAAYC,6BAA+B,GAE3CC,EACuB,MAA3BL,EACI,KACAI,4BAA4BE,MACzBC,GAAaA,EAASC,SAAWR,IAG1C,GAAIK,EACFb,KAAKL,aAAeY,EAAE,OAAQ,CAC5BU,KAAM5B,MAAM6B,aAAa,wCAAyC,CAChEH,SAAUF,EAAiBG,OAC3BG,OAAQnB,KAAKmB,SAEfC,MAAO,sBACPC,KAAMhC,MAAMiC,EAAE,uBAAwB,yBAA0B,CAC9DP,SAAUF,EAAiBU,SAE5BC,SAASxB,KAAKN,uBACZ,CACLM,KAAKL,aAAeY,EAAE,YAAa,CACjCkB,KAAM,SACNL,MAAO,8BACPC,KAAMhC,MAAMiC,EAAE,uBAAwB,iBACrCE,SAASxB,KAAKN,mBAEjB,MAAMgC,EAAQnB,EAAE,SAAU,CAAEa,MAAO,SAAUI,SAC3CxB,KAAKN,mBAGDiC,EAAYpB,EAAE,QAAS,CAAEa,MAAO,WAAYI,SAASE,GAE3D,IAAK,IAAIE,EAAI,EAAGA,EAAIjB,EAAUkB,OAAQD,IAAK,CACzC,MAAMb,EAAWJ,EAAUiB,GACrBE,EAAMvB,EAAE,SAASiB,SAASG,GAEhCpB,EAAE,OAAQ,CACRU,KAAM5B,MAAM6B,aAAa,wCAAyC,CAChEH,SAAUA,EAASC,OACnBG,OAAQnB,KAAKmB,SAEfY,KAAO,kDACLhB,EAASiB,cACD3C,MAAM4C,WAAWlB,EAASQ,UACnCC,SAASM,GAGd,IAAII,QAAQC,QAAQnC,KAAKL,cAG3BK,KAAKoC,UAAUpC,KAAKN,sBAIxBL,MAAMgD,0BACJ,+CACAhD,MAAMC,mBAAmBC","sources":["webpack:///./account-index.js"],"sourcesContent":["/* global socialMediaConnectProviders */\n\n// Add extension\nif (typeof Craft.SocialMediaConnect === typeof undefined) {\n  Craft.SocialMediaConnect = {};\n}\n\nCraft.SocialMediaConnect.AccountIndex = Craft.BaseElementIndex.extend({\n  $newEntryBtnGroup: null,\n  $newEntryBtn: null,\n\n  init: function (elementType, $container, settings) {\n    this.on('selectSource', this.updateButton.bind(this));\n    this.on('selectSite', this.updateButton.bind(this));\n    this.base(elementType, $container, settings);\n  },\n\n  afterInit: function () {\n    this.base();\n  },\n\n  updateButton: function () {\n    // Remove the old button, if there is one\n    if (this.$newEntryBtnGroup) {\n      this.$newEntryBtnGroup.remove();\n    }\n\n    this.$newEntryBtnGroup = $('<div class=\"btngroup submit\"/>');\n\n    const selectedProviderHandle = this.$source?.data('key') ?? '*';\n    const providers = socialMediaConnectProviders || [];\n\n    const selectedProvider =\n      selectedProviderHandle === '*'\n        ? null\n        : socialMediaConnectProviders.find(\n            (provider) => provider.handle === selectedProviderHandle,\n          );\n\n    if (selectedProvider) {\n      this.$newEntryBtn = $('<a/>', {\n        href: Craft.getActionUrl('social-media-connect/accounts/connect', {\n          provider: selectedProvider.handle,\n          siteId: this.siteId,\n        }),\n        class: 'btn submit add icon',\n        text: Craft.t('social-media-connect', 'Add {provider} account', {\n          provider: selectedProvider.name,\n        }),\n      }).appendTo(this.$newEntryBtnGroup);\n    } else {\n      this.$newEntryBtn = $('<button/>', {\n        type: 'button',\n        class: 'btn submit add icon menubtn',\n        text: Craft.t('social-media-connect', 'Add account'),\n      }).appendTo(this.$newEntryBtnGroup);\n\n      const $menu = $('<div/>', { class: 'menu' }).appendTo(\n        this.$newEntryBtnGroup,\n      );\n\n      const $menuList = $('<ul/>', { class: 'padded' }).appendTo($menu);\n\n      for (let i = 0; i < providers.length; i++) {\n        const provider = providers[i];\n        const $li = $('<li/>').appendTo($menuList);\n\n        $('<a/>', {\n          href: Craft.getActionUrl('social-media-connect/accounts/connect', {\n            provider: provider.handle,\n            siteId: this.siteId,\n          }),\n          html: `<span class=\"smc-menu-icon\" aria-hidden=\"true\">${\n            provider.icon\n          }</span>${Craft.escapeHtml(provider.name)}`,\n        }).appendTo($li);\n      }\n\n      new Garnish.MenuBtn(this.$newEntryBtn);\n    }\n\n    this.addButton(this.$newEntryBtnGroup);\n  },\n});\n\nCraft.registerElementIndexClass(\n  'Gewerk\\\\SocialMediaConnect\\\\Element\\\\Account',\n  Craft.SocialMediaConnect.AccountIndex,\n);\n"],"names":["Craft","SocialMediaConnect","AccountIndex","BaseElementIndex","extend","$newEntryBtnGroup","$newEntryBtn","init","elementType","$container","settings","this","on","updateButton","bind","base","afterInit","remove","$","selectedProviderHandle","$source","data","providers","socialMediaConnectProviders","selectedProvider","find","provider","handle","href","getActionUrl","siteId","class","text","t","name","appendTo","type","$menu","$menuList","i","length","$li","html","icon","escapeHtml","Garnish","MenuBtn","addButton","registerElementIndexClass"],"sourceRoot":""}